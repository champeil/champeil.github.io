---
layout: default
title: 博客
---
<h1>最新文章</h1>

<div class="search-box">
  <input type="text" id="search" placeholder="搜索标题或标签..." />
  <div class="no-result" id="no-result">未找到匹配文章</div>
</div>

<ul class="post-list" id="post-list">
  {% assign posts_sorted = site.posts %}
  {% for post in posts_sorted %}
    <li class="post-item" data-title="{{ post.title | downcase }}" data-tags="{% for t in post.tags %}{{ t | downcase }} {% endfor %}">
      <h2><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h2>
      <div class="post-meta">
        <span>{{ post.date | date: "%Y-%m-%d" }}</span>
        {% if post.tags %}
          <span class="tags-inline">
            {% for tag in post.tags %}
              <a href="{{ '/tags.html#' | append: tag | relative_url }}">{{ tag }}</a>
            {% endfor %}
          </span>
        {% endif %}
      </div>
      {% if post.excerpt %}
        <p>{{ post.excerpt | strip_html | truncate: 140 }}</p>
      {% endif %}
    </li>
  {% endfor %}
</ul>

<h2>标签云</h2>
<div class="tag-cloud">
  {% assign all_tags = site.tags %}
  {% for tag in all_tags %}
    {% assign tag_name = tag[0] %}
    {% assign posts_in_tag = tag[1] %}
    {% assign count = posts_in_tag | size %}
    {% comment %}
      简单计算 scale：最小 1 最大 2 （可调）；不用复杂逻辑以保持纯 Liquid 兼容
    {% endcomment %}
    {% assign scale = 1 %}
    {% if count > 6 %}{% assign scale = 2 %}
    {% elsif count > 3 %}{% assign scale = 1.5 %}
    {% endif %}
    <a href="{{ '/tags.html#' | append: tag_name | relative_url }}" style="--scale:{{ scale }}">
      {{ tag_name }} <span class="count">{{ count }}</span>
    </a>
  {% endfor %}
</div>

<script>
(function(){
  const input = document.getElementById('search');
  const list = document.getElementById('post-list');
  const items = Array.from(list.querySelectorAll('.post-item'));
  const noResult = document.getElementById('no-result');
  function filter(){
    const q = input.value.trim().toLowerCase();
    let visible = 0;
    items.forEach(li=>{
      if(!q){
        li.style.display = '';
        visible++;
        return;
      }
      const title = li.getAttribute('data-title');
      const tags = li.getAttribute('data-tags');
      if(title.includes(q) || tags.includes(q)){
        li.style.display = '';
        visible++;
      } else {
        li.style.display = 'none';
      }
    });
    noResult.style.display = visible ? 'none':'block';
  }
  input.addEventListener('input', filter);
})();
</script>
